#+TITLE: Agent_ME restful interface
#+AUTHOR: zhengyu li
#+OPTIONS: ^:nil \n:t

Http request url: http://host:port/post-command

* Add agent
** request:
#+BEGIN_SRC js
  {
      "command":"add_agent"
      "body":{
          "agent_id":"1"
          "push_ip":"192.168.1.100"
          "push_port":"4499"
      }
  }
#+END_SRC

** response:
#+BEGIN_SRC js
  {
      "code":"0"
      "body":{
          "status":"ready"
      }
  }
#+END_SRC

* Remove agent
** request:
#+BEGIN_SRC js
  {
      "command":"remove_agent"
      "body":{
          "agent_id":"1"
      }
  }
#+END_SRC

** response:
#+BEGIN_SRC js
  {
      "code":"0"
  }
#+END_SRC

* Start agent
** request:
#+BEGIN_SRC js
  {
      "command":"start_agent"
      "body":{
          "agent_id":"1"
      }
  }
#+END_SRC

** response:
#+BEGIN_SRC js
  {
      "code":"0"
  }
#+END_SRC

* Stop agent
** request:
#+BEGIN_SRC js
  {
      "command":"stop_agent"
      "body":{
          "agent_id":"1"
      }
  }
#+END_SRC

** response:
#+BEGIN_SRC js
  {
      "code":"0"
  }
#+END_SRC

* Heartbeat
** request:
#+BEGIN_SRC js
  {
      "command":"heartbeat"
      "body":{
          "agent_id":"1"
      }
  }
#+END_SRC

** response:
#+BEGIN_SRC js
  {
      "code":"0"
      "body":{
          "status":"running"
      }
  }
#+END_SRC

* Push profile
** request:
#+BEGIN_SRC js
  {
      "command":"push_profile"
      "body":{
          "agent_id":"1"
          "app_services":[{"service_id":"1" ...}, {"service_id":"2" ...}]
      }
  }
#+END_SRC

** response:
#+BEGIN_SRC js
  {
      "code":"0"
  }
#+END_SRC
