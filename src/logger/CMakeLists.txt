CMAKE_MINIMUM_REQUIRED (VERSION 2.8.0)

INCLUDE_DIRECTORIES (
  ${PROJECT_SOURCE_DIR}/src/util)

SET (LOGD_SOURCE_FILES
  logd.c
  ${PROJECT_SOURCE_DIR}/src/util/util.c)
ADD_EXECUTABLE (logd ${LOGD_SOURCE_FILES})
TARGET_LINK_LIBRARIES (logd czmq)
INSTALL (TARGETS logd DESTINATION ${AGENT_SBIN_DIR})

SET (LOGVIEW_SOURCE_FILES
  logview.c
  ${PROJECT_SOURCE_DIR}/src/util/util.c)
ADD_EXECUTABLE (logview ${LOGVIEW_SOURCE_FILES})
TARGET_LINK_LIBRARIES (logview czmq)
INSTALL (TARGETS logview DESTINATION ${AGENT_BIN_DIR})

INSTALL (
  FILES ${PROJECT_SOURCE_DIR}/src/logger/logd.init
  RENAME logd
  DESTINATION /etc/init.d/
  PERMISSIONS  OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)
